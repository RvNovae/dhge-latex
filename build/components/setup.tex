% DOCUMENT SETUP
\onehalfspacing
\widowpenalty10000
\clubpenalty10000

% INHALTSVERZEICHNIS SETUP
\cftsetindents	{section}{0em}{4em}
\cftsetindents	{subsection}{0em}{4em}
\cftsetindents	{subsubsection}{0em}{4em}
\renewcommand	{\contentsname}{Inhaltsverzeichnis}
\setcounter		{tocdepth}{3}
\setcounter		{secnumdepth}{5}

% ABBILDUNGEN UND TABELLEN SETUP

% im Kusche-Mode sollen Abbildungen nach kapitel.lfd nummeriert werden
\if\CKUSCHE 1
    \counterwithin{figure}{section}
    \counterwithin{table}{section}
\fi

\renewcommand	{\listfigurename}{Abbildungsverzeichnis}
\renewcommand	{\listtablename}{Tabellenverzeichnis}

\addto{\captionsngerman}{
    \renewcommand*{\figurename}{Abb.}
    \renewcommand*{\tablename}{Tab.}
}

\addtocontents{lof}{\linespread{2}\selectfont}
\addtocontents{lot}{\linespread{2}\selectfont}

\makeatletter
\renewcommand{\cftfigpresnum}{Abb. }
\renewcommand{\cfttabpresnum}{Tab. }

\setlength{\cftfignumwidth}{2cm}
\setlength{\cfttabnumwidth}{2cm}

\setlength{\cftfigindent}{0cm}
\setlength{\cfttabindent}{0cm}
\makeatother

% CAPTION SETUP
\captionsetup{
    font=small,
    labelfont=bf,
    singlelinecheck=false,
    skip=10pt,
    belowskip=0pt
}

\renewcommand*{\labelalphaothers}{\textsuperscript{}}

% HEADERS & FOOTERS
\pagestyle		{fancyplain}
\fancyhf		{}
\renewcommand	{\headrulewidth}{0pt}
\renewcommand	{\footrulewidth}{0pt}
\setlength		{\headheight}{15pt}

% Im Kusche-Mode ist die Seitenzahl unten rechts, ansonsten oben mittig
\if\CKUSCHE 0
    \fancyhead		[c]{\thepage}
    \fancyfoot		{}
\else
    \fancyhead      {}
    \fancyfoot      [R]{\thepage}
    \fancyfoot      [L]{\leftmark}
\fi

% PARAGRAPH SETUP
\newcommand{\dhgeparagraph}[1]{\paragraph{#1}\mbox{}\\\vspace{-1.5em}}

% FOOTNOTE
\renewcommand{\footnotelayout}{\hspace{0.5em}}

% Conditionals um AbbildungsVZ und TabellenVZ nur zu rendern, wenn sie nicht leer sind
\newtotcounter{figCount}
\newtotcounter{tabCount}
\let\oldTabTOC=\table
\let\oldFigTOC=\figure
\renewcommand{\figure}{\stepcounter{figCount}\oldFigTOC}
\renewcommand{\table}{\stepcounter{tabCount}\oldTabTOC}

\newcommand{\conditionalLoF}{
    \ifnum\totvalue{figCount}>0
        \addcontentsline{toc}{section}{\listfigurename}
        \listoffigures
        \cleardoublepage
    \fi
}
\newcommand{\conditionalLoT}{
    \ifnum\totvalue{tabCount}>0
        \addcontentsline{toc}{section}{\listtablename}
        \listoftables
        \cleardoublepage
    \fi
}

% COUNTER (Zweck: in römischen Zahlen weiterzählen, nachdem der Counter von arabisch zurückgeändert wird)
\newcounter{savepage}

% Sections sollen mit Seitenumbruch beginnen
\let\stdsection\section
\renewcommand\section{\newpage\stdsection}

% Überschreiben von \mathrm{} -> einheitlichen Abstand einfügen
\let\oldMathrm\mathrm
\renewcommand{\mathrm}[1]{\,\oldMathrm{#1}}

% Template-Root-Verzeichnis ist das neue Arbeitsverzeichnis
% muss nach \input{setup.tex} aufgerufen werden, damit alle Template-Root-Dateien integriert werden
\makeatletter
\def\input@path{{../}{path1/}}
\makeatother

% die veraltete CAUTHOR Variable wird automatisch befüllt
\def\CAUTHOR{\CAUTHORVOR\ \CAUTHORNACH}

\newcounter{totalbibentries}
\newcommand*{\listcounted}{}

\makeatletter
\AtDataInput{
  \xifinlist{\abx@field@entrykey}\listcounted
    {}
    {\stepcounter{totalbibentries}
     \listxadd\listcounted{\abx@field@entrykey}}
}
\makeatother

% Standard Abkürzungsverzeichnis überschreiben -> einheitliche Einrückung
\RenewAcroTemplate[list]{description}{%
    \acronymsmapT{%
        \AcroAddRow{%
        \textbf{\acrowrite{short}}%
        &
        \acrowrite{long}%
        \acropages
            {\acrotranslate{page}\nobreakspace}%
            {\acrotranslate{pages}\nobreakspace}%
        \vspace{10pt}
        \tabularnewline
        }%
    }%
    \acroheading
    \acropreamble
    \noindent
    \begin{tabular}{@{}ll}
        \AcronymTable
    \end{tabular}
}

% Abkürzungsverzeichnis SETUP
\acsetup{
	list/heading = section*,
	list/name = {Abkürzungsverzeichnis},
    list/template = description,
	make-links = true,
	link-only-first = false
}

% Abkürzungsverzeichnis überschreibt \UseAcroTemplate für \ac
% New Counter to count used acronyms:
\newtotcounter{acro_num}
\def\oldUseAcroTemplate{} \let\oldUseAcroTemplate=\UseAcroTemplate
\def\UseAcroTemplate{\stepcounter{acro_num}\oldUseAcroTemplate}
