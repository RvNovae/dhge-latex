% ROOT & PACKAGE SETUP
\documentclass	[a4paper, 12pt]{article}

% Prämbel laden
\input{../preamble.tex}

% verwendete Pakete laden und konfigurieren
\input{components/package.config.tex}

% Setup von Commands und Dokument
\input{components/com.tex}
\input{../config.tex}
\input{components/setup.tex}  % -> ab hier ist das Arbeitsverzeichnis "../"
\input{abk.tex}


% Konfiguration globaler Definitionen

% PDF Metadata
\hypersetup{
	pdftitle={\CTITLE},
	pdfauthor={\CAUTHOR}
}

\addbibresource	{../literatur.bib}
\graphicspath	{{../assets/img/}}

% Hier beginnt der Spaß
\title{{\LARGE \textbf{\CTITLE}}}
\author			{}
\date			{}

% lade Deckblatt ohne Nummerierung
\begin{document}
\pagenumbering	{gobble}

\input			{build/components/deckblatt.tex}

% Lade Sperrvermerk abhängig von der Einstellung in conf.tex
\if\CSPERRVERMERK 1
	\input			{build/components/sperrvermerk.tex}
\fi

% Lade Thesenblatt abhängig von der Einstellung in conf.tex
\if\CARBEIT B
	\input			{../bachelor.tex}
\fi

% Lade Abstract abhängig von der Einstellung in conf.tex
\if\HASABSTRACT 1
    \input          {../abstract.tex}
    \newpage % Sections haben hier noch keinen automatischen Seitenumbruch
\fi

% INHALTSVERZEICHNIS
\pagenumbering{Roman} \setcounter{page}{1}
\tableofcontents{\fancyfoot{}}
\cleardoublepage

% ABBILDUNGSVERZEICHNIS
\phantomsection
\conditionalLoF

% TABELLENVERZEICHNIS
\phantomsection
\conditionalLoT

% ABKÜRZUNGSVERZEICHNIS
% wird nur dann generiert, wenn mindestens ein mal \ac oder ein verwandter Befehl aufgerufen wurde und damit nicht leer ist
\ifnum\totvalue{acro_num}>0
	\printacronyms
	\addcontentsline{toc}{section}{Abkürzungsverzeichnis}
	\cleardoublepage
\fi


\setcounter{savepage}{\arabic{page}}

% MAIN CONTENT
\pagenumbering	{arabic}
\input			{main.tex}
\cleardoublepage

% LITERATURVERZEICHNIS
% TODO Formatierung

% Im Kusche-Mode wird arabische Nummerierung beibehalten
\if\KUSCHE 0
\pagenumbering	{Roman} \setcounter{page}{\thesavepage}
\fi

% wenn keine Literatur verwendet (zitiert) wird, erstelle kein Literaturverzeichnis
% im Kusche-Mode wird das LiteraturVZ später generiert
\if\KUSCHE 0
    \ifnum\thetotalbibentries>0
        \printbibliography[title=Literaturverzeichnis]
        \addcontentsline{toc}{section}{Literaturverzeichnis}
        \cleardoublepage
    \fi
\fi


% TODO %ANLAGENVERZEICHNIS UND ANLAGEN
% ereugt ein Anlagenkapitel und fügt es zum InhaltsVZ hinzu, insofern Anlagen existieren.
% \listofanlagen generiert ein Anlagenverzeichnis
% im Kusche-Modus wird kein Anlagenverzeichnis erzeugt, aber Anlagen im Inhaltsverzeichnis geführt (TODO)
    \ifnum\totvalue{anlagenentries}>0
        \section*{Anlagen}
        \if\KUSCHE 0
            \begin{spacing}{2}
                \listofanlagen
            \end{spacing}
        \fi
        \addcontentsline{toc}{section}{Anlagen}
        \cleardoublepage

\if\KUSCHE 1
    % die kapitel.lfd-Nummerierung wird im Kusche Mode ab hier wieder deaktiviert,
    % da Anhänge mit Buchstaben nummeriert werden sollen
    \counterwithout{figure}{section}
    \counterwithout{table}{section}
\fi

\renewFigTabCap % Verhalten von Figure und Table Environments sowie \caption wird verändert (TODO: wie genau? LG, ZPM)
\input{anlagen.tex}
\cleardoublepage


% Im Kusche-Mode kommt das LiteraturVZ zuletzt
\if\KUSCHE 1
    \ifnum\thetotalbibentries>0
        \printbibliography[title=Literaturverzeichnis]
        \addcontentsline{toc}{section}{Literaturverzeichnis}
        \cleardoublepage
    \fi
\fi

% EHRENWÖRTLICHE ERKLÄRUNG
\pagestyle{empty}
\pagenumbering{gobble}
\section*{Ehrenwörtliche Erklärung}
\addcontentsline{toc}{section}{Ehrenwörtliche Erklärung}
\input{build/components/ehrenwort.tex}

\if\CARBEIT B
	\input{components/freigabe.tex}
\fi

\end{document}
