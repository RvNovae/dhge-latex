% ROOT & PACKAGE SETUP
\documentclass	[a4paper, 12pt]{article}

% preamble input
\input{../preamble.tex}

% management for all packages
\input{components/package.config.tex}

% setups and commands
\input{components/com.tex}
\input{../config.tex}
\input{components/setup.tex}  % -> default dir is set to "../" in this file
\input{abk.tex}


% configuration of global definitions

% PDF Metadata
\hypersetup{
	pdftitle={\CTITLE},
	pdfauthor={\CAUTHOR}
}

\addbibresource	{../literatur.bib}
\graphicspath	{{../assets/img/}}

% opening
\title{{\LARGE \textbf{\CTITLE}}}
\author			{}
\date			{}

\begin{document}
\pagenumbering	{gobble}

\input			{build/components/deckblatt.tex}


\if\CSPERRVERMERK 1
	\input			{build/components/sperrvermerk.tex}
\fi


\if\CARBEIT B
	\input			{../bachelor.tex}
\fi

\if\HASABSTRACT 1
    \input          {../abstract.tex}
    \newpage % for some reason, the section newpage override doesn't work here, so just do it manually
\fi

% INHALTSVERZEICHNIS
\pagenumbering{Roman} \setcounter{page}{1}
\tableofcontents{\fancyfoot{}}
\cleardoublepage

% ABBILDUNGSVERZEICHNIS
\phantomsection
\conditionalLoF

% TABELLENVERZEICHNIS
\phantomsection
\conditionalLoT

% ABKÜRZUNGSVERZEICHNIS
% will only be created if \ac or similar used at least once
\ifnum\totvalue{acro_num}>0
	\printacronyms
	\addcontentsline{toc}{section}{Abkürzungsverzeichnis}
	\cleardoublepage
\fi


\setcounter{savepage}{\arabic{page}}

% MAIN CONTENT
\pagenumbering	{arabic}
\input			{main.tex}
\cleardoublepage

% LITERATURVERZEICHNIS
% TODO Formatierung
% Im Kusche-Mode wird arabische Nummerierung beibehalten
\if\KUSCHE 0
\pagenumbering	{Roman} \setcounter{page}{\thesavepage}
\fi

% wenn keine Literatur verwendet (zitiert) wird, erstelle kein Literaturverzeichnis
% im Kusche-Mode wird das LiteraturVZ später generiert
\if\KUSCHE 0
    \ifnum\thetotalbibentries>0
        \printbibliography[title=Literaturverzeichnis]
        \addcontentsline{toc}{section}{Literaturverzeichnis}
        \cleardoublepage
    \fi
\fi


% TODO %ANLAGENVERZEICHNIS UND ANLAGEN
% im Kusche-Modus wird kein Anlagenverzeichnis erzeugt, aber Anlagen im Inhaltsverzeichnis geführt (TBD)
\if\KUSCHE 0
    \ifnum\totvalue{anlagenentries}>0
        \section*{Anlagen}
        \begin{spacing}{2}
            \listofanlagen
        \end{spacing}
        \addcontentsline{toc}{section}{Anlagen}
        \cleardoublepage
    \fi
\fi

\renewFigTabCap % change the behavior from the env figure and table and the command \caption{}
\input{anlagen.tex}
\cleardoublepage


% Im Kusche-Mode kommt das LiteraturVZ zuletzt
\if\KUSCHE 1
    \ifnum\thetotalbibentries>0
        \printbibliography[title=Literaturverzeichnis]
        \addcontentsline{toc}{section}{Literaturverzeichnis}
        \cleardoublepage
    \fi
\fi

% EHRENWÖRTLICHE ERKLÄRUNG
\pagestyle{empty}
\pagenumbering{gobble}
\section*{Ehrenwörtliche Erklärung}
\addcontentsline{toc}{section}{Ehrenwörtliche Erklärung}
\input{build/components/ehrenwort.tex}

\if\CARBEIT B
	\input{components/freigabe.tex}
\fi

\end{document}
